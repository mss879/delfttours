'use client';

import { Fragment } from 'react';

function EnvelopeIcon() {
  return (
    <svg
      width="28"
      height="28"
      viewBox="0 0 26 26"
      fill="white"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M0.803538 7.56773L12.3619 0.635535C12.7578 0.398098 13.2524 0.398185 13.6481 0.635773L25.1966 7.5677C25.3849 7.68066 25.5 7.88407 25.5 8.10357V23.9997C25.5 24.6901 24.9404 25.2497 24.25 25.2497H1.75C1.05965 25.2497 0.5 24.6901 0.5 23.9997V8.10372C0.5 7.88415 0.615225 7.68067 0.803538 7.56773ZM3 9.16555V22.7497H23V9.16496L13.0046 3.16526L3 9.16555ZM13.0746 16.1226L19.6945 10.5439L21.3055 12.4556L13.0925 19.377L4.80501 12.4644L6.29499 10.5352L13.0746 16.1226Z"
        fill="#ffffff"
      />
    </svg>
  );
}

function GroupIcon() {
  return (
    <svg
      width="28"
      height="28"
      viewBox="0 0 24 25"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M18.25 5.5C17.5596 5.5 17 4.94035 17 4.25C17 3.55965 17.5596 3 18.25 3C18.9404 3 19.5 3.55965 19.5 4.25C19.5 4.94035 18.9404 5.5 18.25 5.5ZM18.25 8C20.3211 8 22 6.32106 22 4.25C22 2.17894 20.3211 0.5 18.25 0.5C16.1789 0.5 14.5 2.17894 14.5 4.25C14.5 6.32106 16.1789 8 18.25 8ZM5.75 1.75C2.98857 1.75 0.75 3.98857 0.75 6.75V9.25H3.25V6.75C3.25 5.36929 4.36929 4.25 5.75 4.25H9.5V1.75H5.75ZM18.25 24.25C21.0114 24.25 23.25 22.0114 23.25 19.25V16.75H20.75V19.25C20.75 20.6308 19.6308 21.75 18.25 21.75H14.5V24.25H18.25ZM7 14.25C7 13.5596 6.44035 13 5.75 13C5.05965 13 4.5 13.5596 4.5 14.25C4.5 14.9404 5.05965 15.5 5.75 15.5C6.44035 15.5 7 14.9404 7 14.25ZM9.5 14.25C9.5 16.3211 7.82106 18 5.75 18C3.67894 18 2 16.3211 2 14.25C2 12.1789 3.67894 10.5 5.75 10.5C7.82106 10.5 9.5 12.1789 9.5 14.25ZM18.25 11.75C16.8692 11.75 15.75 12.8693 15.75 14.25H13.25C13.25 11.4886 15.4886 9.25 18.25 9.25C21.0114 9.25 23.25 11.4886 23.25 14.25H20.75C20.75 12.8693 19.6308 11.75 18.25 11.75ZM3.25 24.25C3.25 22.8692 4.36929 21.75 5.75 21.75C7.13071 21.75 8.25 22.8692 8.25 24.25H10.75C10.75 21.4886 8.51143 19.25 5.75 19.25C2.98857 19.25 0.75 21.4886 0.75 24.25H3.25Z"
        fill="#ffffff"
      />
    </svg>
  );
}

function ChecklistIcon() {
  return (
    <svg
      width="28"
      height="28"
      viewBox="0 0 26 26"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M6.74974 6.75V1.75C6.74974 1.05965 7.30938 0.5 7.99974 0.5H24.2498C24.9401 0.5 25.4998 1.05965 25.4998 1.75V18C25.4998 18.6904 24.9401 19.25 24.2498 19.25H19.25V24.2406C19.25 24.9361 18.6888 25.5 17.9906 25.5H1.7591C1.06358 25.5 0.5 24.9389 0.5 24.2406L0.50345 8.00935C0.5036 7.31384 1.06475 6.75 1.76281 6.75H6.74974ZM9.24974 6.75H17.9909C18.6863 6.75 19.25 7.31115 19.25 8.00935V16.75H22.9998V3H9.24974V6.75ZM16.75 9.25H3.00319L3.00026 23H16.75V9.25ZM8.62803 20.5L4.20861 16.0806L5.97638 14.3129L8.62803 16.9645L13.9314 11.6611L15.6991 13.4289L8.62803 20.5Z"
        fill="#ffffff"
      />
    </svg>
  );
}

function SuitcaseIcon() {
  return (
    <svg
      width="28"
      height="28"
      viewBox="0 0 24 27"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M19.5 26.75H17V25.5H7V26.75H4.5V25.5H3.25C1.86929 25.5 0.75 24.3808 0.75 23V6.75C0.75 5.36929 1.86929 4.25 3.25 4.25H7V1.75C7 1.05965 7.55965 0.5 8.25 0.5H15.75C16.4404 0.5 17 1.05965 17 1.75V4.25H20.75C22.1308 4.25 23.25 5.36929 23.25 6.75V23C23.25 24.3808 22.1308 25.5 20.75 25.5H19.5V26.75ZM20.75 6.75H3.25V23H20.75V6.75ZM9.5 9.25V20.5H7V9.25H9.5ZM17 9.25V20.5H14.5V9.25H17ZM14.5 3H9.5V4.25H14.5V3Z"
        fill="#ffffff"
      />
    </svg>
  );
}

const steps = [
  {
    number: '01',
    icon: EnvelopeIcon,
    title: 'Submit Your Details',
    titleClassName: '',
    connector: {
      text: '',
      className: 'mb-2 text-center text-sm font-semibold uppercase tracking-[0.25em] text-green-700',
    },
  },
  {
    number: '02',
    icon: GroupIcon,
    title: 'Connect with a Local Expert Online',
    titleClassName: 'md:min-w-[190px]',
    connector: {
      text: 'Free Consultation',
      className:
        'mb-16 text-center text-sm font-semibold uppercase tracking-[0.25em] text-green-700',
    },
  },
  {
    number: '03',
    icon: ChecklistIcon,
    title: 'Receive 3 Personalised Travel Quotes',
    titleClassName: 'md:min-w-[190px]',
    connector: {
      text: 'Discuss Further',
      className:
        'mb-16 text-center text-sm font-semibold uppercase tracking-[0.25em] text-green-700',
    },
  },
  {
    number: '04',
    icon: SuitcaseIcon,
    title: 'Secure Your Booking',
    titleClassName: '',
  },
];

export default function HowItWorks() {
  return (
    <section className="mx-auto mt-[48px] max-w-[1440px] px-4">
      <div className="w-full rounded-[30px] bg-[#EFF8F2]">
        <div className="mx-auto max-w-[1200px] px-6 pt-12 pb-12 lg:px-12 lg:pb-16">
          <div className="flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between">
            <h2 className="text-start text-[36px] lg:mb-0">
              <b>How </b> It Works
            </h2>
            <p className="max-w-xl text-base text-slate-600 lg:text-right">
              Craft your bespoke Delft getaway in four guided steps, each led by a
              local specialist dedicated to your perfect itinerary.
            </p>
          </div>

          <div className="relative mt-14 hidden justify-between lg:flex">
            <div className="absolute left-[5%] top-[47%] flex h-3 w-[90%] items-center bg-white">
              <div className="w-full border-[1.5px] border-dashed border-green border-spacing-5"></div>
            </div>
            {steps.map((step, index) => {
              const Icon = step.icon;
              return (
                <Fragment key={step.number}>
                  <div className="group relative min-w-[160px]">
                    <div className="flex flex-col items-center gap-3 p-1">
                      <span className="mb-8 text-xs font-semibold uppercase tracking-[0.35em] text-green-700">
                        Step {step.number}
                      </span>
                      <div className="flex h-[80px] w-[80px] items-center justify-center rounded-full bg-green text-center text-3xl text-white shadow-[0_12px_30px_rgba(34,197,94,0.25)] ring-4 ring-white transition-transform duration-300 group-hover:-translate-y-1 group-hover:shadow-[0_18px_40px_rgba(21,128,61,0.25)]">
                        <Icon />
                      </div>
                      <p
                        className={`mt-6 text-center text-md font-semibold text-slate-900 ${step.titleClassName}`.trim()}
                      >
                        {step.title}
                      </p>
                    </div>
                  </div>
                  {index < steps.length - 1 && (
                    <div className="flex w-full items-center justify-center">
                      <p className={step.connector?.className ?? ''}>
                        {step.connector?.text}
                      </p>
                    </div>
                  )}
                </Fragment>
              );
            })}
          </div>

          <div className="mt-10 space-y-6 lg:hidden">
            {steps.map((step) => {
              const Icon = step.icon;
              return (
                <div
                  key={step.number}
                  className="flex items-start gap-4 rounded-2xl border border-green-100 bg-white p-4 shadow-sm transition-transform duration-300 hover:-translate-y-1 hover:shadow-md"
                >
                  <div className="flex-shrink-0">
                    <div className="flex h-[60px] w-[60px] items-center justify-center rounded-full bg-green text-white shadow-[0_10px_25px_rgba(34,197,94,0.25)] ring-4 ring-white">
                      <Icon />
                    </div>
                  </div>
                  <div className="flex-1">
                    <p className="mb-2 text-xs font-semibold uppercase tracking-[0.35em] text-green-700">
                      Step {step.number}
                    </p>
                    <p className="mb-1 text-base font-semibold text-slate-900">
                      {step.title}
                    </p>
                    {step.connector?.text && (
                      <p className="text-sm text-slate-600">{step.connector.text}</p>
                    )}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      </div>
    </section>
  );
}
